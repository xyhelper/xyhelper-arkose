"use strict";(self["webpackChunkarkose_vue2_example"]=self["webpackChunkarkose_vue2_example"]||[]).push([[845],{273:function(e,o,t){t.d(o,{Z:function(){return u}});var n=function(){var e=this,o=e._self._c;return"inline"===e.mode?o("div",{attrs:{id:e.selector?.slice(1)}}):e._e()},r=[],i={name:"Arkose",props:{publicKey:{type:String,default:""},mode:{type:String,default:""},selector:{type:String,default:null},nonce:{type:String,default:""}},data(){return{scriptId:""}},methods:{removeScript(){const e=document.getElementById(this.scriptId);e&&e.remove()},loadScript(e,o){this.removeScript();const t=document.createElement("script");return t.id=this.scriptId,t.type="text/javascript",t.src=`https://client-api.arkoselabs.com/v2/${e}/api.js`,t.setAttribute("data-callback","setupEnforcement"),t.async=!0,t.defer=!0,o&&t.setAttribute("data-nonce",o),document.body.appendChild(t),t},setupEnforcement(e){window.myEnforcement=e,window.myEnforcement.setConfig({selector:this.selector,mode:this.mode,onReady:()=>{this.$emit("onReady"),window.myEnforcement.run()},onShown:()=>{this.$emit("onShown")},onShow:()=>{this.$emit("onShow")},onSuppress:()=>{this.$emit("onSuppress")},onCompleted:e=>{this.$emit("onCompleted",e.token)},onReset:()=>{this.$emit("onReset")},onHide:()=>{this.$emit("onHide")},onError:e=>{this.$emit("onError",e)},onFailed:e=>{this.$emit("onFailed",e)}})}},mounted(){this.scriptId=`arkose-script-${this.publicKey}`;const e=this.loadScript(this.publicKey,this.nonce);e.onload=()=>{console.log("Arkose API Script loaded"),window.setupEnforcement=this.setupEnforcement.bind(this)},e.onerror=()=>{console.log("Could not load the Arkose API Script!")}},destroyed(){window.myEnforcement&&delete window.myEnforcement,window.setupEnforcement&&delete window.setupEnforcement,this.removeScript()}},s=i,l=t(1),c=(0,l.Z)(s,n,r,!1,null,null,null),u=c.exports},845:function(e,o,t){t.r(o),t.d(o,{default:function(){return d}});var n=function(){var e=this,o=e._self._c;return o("div",[o("h2",[e._v("Token acquisition in progress.")]),o("Arkose",{attrs:{"public-key":e.publicKey,mode:"lightbox"},on:{onCompleted:function(o){return e.onCompleted(o)},onError:function(o){return e.onError(o)},onShown:e.onShown}}),o("div",{attrs:{id:"currentTime"}},[e._v(" "+e._s(e.currentTime)+" ")]),o("div",{attrs:{id:"token"}},[e._v(" "+e._s(e.arkoseToken)+" ")]),o("input",{attrs:{type:"submit",value:"Submit"},on:{click:function(o){return e.onSubmit()}}})],1)},r=[],i=t(273),s={name:"LoginComponent",components:{Arkose:i.Z},data(){return{publicKey:"35536E1E-65B4-4D96-9D97-6ADB7EFF8147",arkoseToken:null,currentTime:null}},methods:{mounted(){console.log("mounted")},onCompleted(e){this.arkoseToken=e;const o=(new Date).getTime(),t=new Date(o).toLocaleString();this.currentTime=t,console.log("currentTime",t),console.log("token",e),this.$http.post("/pushtoken",{token:e}).then((e=>{console.log(e);const o=this.$route.query.delay||5;console.log("delay",o),setTimeout((()=>{window.location.reload()}),1e3*o)})).catch((e=>{console.log(e);const o=this.$route.query.delay||5;console.log("delay",o),setTimeout((()=>{window.location.reload()}),1e3*o)}))},onError(e){console.log("onError",e),setTimeout((()=>{window.location.reload()}),3e4)},onShown(){console.log("onShown,Human verification required. The current page will automatically refresh in 30 seconds."),setTimeout((()=>{window.location.reload()}),3e4)},onSubmit(){this.arkoseToken||window.myEnforcement.run()}}},l=s,c=t(1),u=(0,c.Z)(l,n,r,!1,null,null,null),d=u.exports}}]);
//# sourceMappingURL=845.cae79517.js.map