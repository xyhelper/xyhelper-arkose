{"version":3,"file":"js/515.a7f5b9b4.js","mappings":"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","sources":["webpack://arkose-vue2-example/./src/components/Arkose.vue","webpack://arkose-vue2-example/src/components/Arkose.vue","webpack://arkose-vue2-example/./src/components/Arkose.vue?13c0","webpack://arkose-vue2-example/./src/components/Arkose.vue?a329","webpack://arkose-vue2-example/./src/components/Login.vue","webpack://arkose-vue2-example/src/components/Login.vue","webpack://arkose-vue2-example/./src/components/Login.vue?0800","webpack://arkose-vue2-example/./src/components/Login.vue?f3db"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.mode === 'inline')?_c('div',{attrs:{\"id\":_vm.selector?.slice(1)}}):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div\n    v-if=\"mode === 'inline'\"\n    :id=\"selector?.slice(1)\"\n  />\n</template>\n\n<script>\nexport default {\n  // eslint-disable-next-line vue/multi-word-component-names\n  name: 'Arkose',\n  props: {\n    publicKey: {\n      type: String,\n      default: ''\n    },\n    mode: {\n      type: String,\n      default: ''\n    },\n    selector: {\n      type: String,\n      default: null // Any valid DOM selector is allowed here\n    },\n    nonce: {\n      type: String,\n      default: ''\n    }\n  },\n  data () {\n    return {\n      scriptId: ''\n    };\n  },\n  methods: {\n    removeScript () {\n      const currentScript = document.getElementById(this.scriptId);\n      if (currentScript) {\n        currentScript.remove();\n      }\n    },\n    // Append the JS tag to the Document Body.\n    loadScript (publicKey, nonce) {\n      this.removeScript();\n      const script = document.createElement('script');\n      script.id = this.scriptId;\n      script.type = 'text/javascript';\n      // script.src = `https://client-api.xyhelper.cn/v2/${publicKey}/api.js`;\n      // script.src = `https://client-api.arkoselabs.com/v2/${publicKey}/api.js`;\n      script.src = `/v2/${publicKey}/api.js`;\n\n      script.setAttribute('data-callback', 'setupEnforcement');\n      script.async = true;\n      script.defer = true;\n      if (nonce) {\n        script.setAttribute('data-nonce', nonce);\n      }\n      document.body.appendChild(script);\n      return script;\n    },\n    setupEnforcement (myEnforcement) {\n      window.myEnforcement = myEnforcement;\n      window.myEnforcement.setConfig({\n        selector: this.selector,\n        mode: this.mode,\n        onReady: () => {\n          this.$emit('onReady');\n          window.myEnforcement.run();\n        },\n        onShown: () => {\n          this.$emit('onShown');\n          // console.log('onShown,出现验证框');\n        },\n        onShow: () => {\n          this.$emit('onShow');\n        },\n        onSuppress: () => {\n          this.$emit('onSuppress');\n        },\n        onCompleted: (response) => {\n          this.$emit('onCompleted', response.token);\n        },\n        onReset: () => {\n          this.$emit('onReset');\n        },\n        onHide: () => {\n          this.$emit('onHide');\n        },\n        onError: (response) => {\n          this.$emit('onError', response);\n        },\n        onFailed: (response) => {\n          this.$emit('onFailed', response);\n        }\n      });\n    }\n  },\n  mounted () {\n    this.scriptId = `arkose-script-${this.publicKey}`;\n    const scriptElement = this.loadScript(this.publicKey, this.nonce);\n    // This will inject required html and css after the Arkose script is properly loaded\n    scriptElement.onload = () => {\n      console.log('Arkose API Script loaded');\n      window.setupEnforcement = this.setupEnforcement.bind(this);\n    };\n    // If there is an error loading the Arkose script this callback will be called\n    scriptElement.onerror = () => {\n      console.log('Could not load the Arkose API Script!');\n    };\n  },\n  destroyed () {\n    if (window.myEnforcement) {\n      delete window.myEnforcement;\n    }\n    if (window.setupEnforcement) {\n      delete window.setupEnforcement;\n    }\n    this.removeScript();\n  }\n};\n</script>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Arkose.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Arkose.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Arkose.vue?vue&type=template&id=41b9ff65&\"\nimport script from \"./Arkose.vue?vue&type=script&lang=js&\"\nexport * from \"./Arkose.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('h2',[_vm._v(\"Token acquisition in progress.\")]),_c('Arkose',{attrs:{\"public-key\":_vm.publicKey,\"mode\":\"lightbox\"},on:{\"onCompleted\":function($event){return _vm.onCompleted($event)},\"onError\":function($event){return _vm.onError($event)},\"onShown\":_vm.onShown}}),_c('div',{attrs:{\"id\":\"currentTime\"}},[_vm._v(\" \"+_vm._s(_vm.currentTime)+\" \")]),_c('div',{attrs:{\"id\":\"token\"}},[_vm._v(\" \"+_vm._s(_vm.arkoseToken)+\" \")]),_c('input',{attrs:{\"type\":\"submit\",\"value\":\"Submit\"},on:{\"click\":function($event){return _vm.onSubmit()}}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <h2>Token acquisition in progress.</h2>\n    <Arkose\n      :public-key=\"publicKey\"\n      mode=\"lightbox\"\n      @onCompleted=\"onCompleted($event)\"\n      @onError=\"onError($event)\"\n      @onShown=\"onShown\"\n    />\n    <div id=\"currentTime\">\n      {{ currentTime }}\n    </div>\n    <div id=\"token\">\n      {{ arkoseToken }}\n    </div>\n\n    <input\n      type=\"submit\"\n      @click=\"onSubmit()\"\n      value=\"Submit\"\n    >\n  </div>\n</template>\n\n<script>\n// import router from '../router.js';\nimport Arkose from './Arkose.vue';\n\nexport default {\n  name: 'LoginComponent',\n  components: {\n    Arkose\n  },\n  data () {\n    return {\n      publicKey: '35536E1E-65B4-4D96-9D97-6ADB7EFF8147',\n      arkoseToken: null,\n      currentTime: null\n    };\n  },\n  methods: {\n    // 加载完成\n    mounted () {\n      console.log('mounted');\n    },\n    onCompleted (token) {\n      this.arkoseToken = token;\n      const currentTime = new Date().getTime();\n      // 转换为可读时间\n      const readableTime = new Date(currentTime).toLocaleString();\n      this.currentTime = readableTime;\n      console.log('currentTime', readableTime);\n      console.log('token', token);\n      // 向 /pushtoken 发送 token\n      this.$http\n        .post('/pushtoken', {\n          token\n        })\n        .then((res) => {\n          console.log(res);\n          // 从url 获取 延迟跳转时间\n          const delay = this.$route.query.delay || 3600;\n          console.log('delay', delay);\n          // 延迟跳转\n          setTimeout(() => {\n            // router.replace({ path: '/dashboard', query: { delay } });\n            window.location.reload();\n          }, delay * 1000);\n        })\n        .catch((err) => {\n          console.log(err);\n          const delay = this.$route.query.delay || 5;\n          console.log('delay', delay);\n\n          // 延迟跳转\n          setTimeout(() => {\n            // router.replace({ path: '/dashboard', query: { delay } });\n            window.location.reload();\n          }, delay * 1000);\n\n          // alert(err);\n        });\n      // 延迟5秒后跳转\n      // setTimeout(() => {\n      //   router.replace({ path: '/dashboard' });\n      // }, 5000);\n    },\n    onError (errorMessage) {\n      console.log('onError', errorMessage);\n      setTimeout(() => {\n        window.location.reload();\n      }, 30000);\n    },\n    onShown () {\n      // console.log('onShown,Human verification required. The current page will automatically refresh in 30 seconds.');\n      // setTimeout(() => {\n      //   window.location.reload();\n      // }, 30000);\n    },\n    onSubmit () {\n      if (!this.arkoseToken) {\n        window.myEnforcement.run();\n      }\n    }\n  }\n};\n</script>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=57f8cc93&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","mode","attrs","selector","slice","_e","staticRenderFns","name","props","publicKey","type","String","default","nonce","data","scriptId","methods","removeScript","currentScript","document","getElementById","remove","loadScript","script","createElement","id","src","setAttribute","async","defer","body","appendChild","setupEnforcement","myEnforcement","window","setConfig","onReady","$emit","run","onShown","onShow","onSuppress","onCompleted","response","token","onReset","onHide","onError","onFailed","mounted","scriptElement","onload","console","log","bind","onerror","destroyed","component","_v","on","$event","_s","currentTime","arkoseToken","onSubmit","components","Arkose","Date","getTime","readableTime","toLocaleString","$http","post","then","res","delay","$route","query","setTimeout","location","reload","catch","err","errorMessage"],"sourceRoot":""}