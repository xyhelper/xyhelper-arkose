"use strict";(self["webpackChunkarkose_vue2_example"]=self["webpackChunkarkose_vue2_example"]||[]).push([[515],{721:function(e,t,o){o.d(t,{Z:function(){return u}});var n=function(){var e=this,t=e._self._c;return"inline"===e.mode?t("div",{attrs:{id:e.selector?.slice(1)}}):e._e()},r=[],i={name:"Arkose",props:{publicKey:{type:String,default:""},mode:{type:String,default:""},selector:{type:String,default:null},nonce:{type:String,default:""}},data(){return{scriptId:""}},methods:{removeScript(){const e=document.getElementById(this.scriptId);e&&e.remove()},loadScript(e,t){this.removeScript();const o=document.createElement("script");return o.id=this.scriptId,o.type="text/javascript",o.src=`/v2/${e}/api.js`,o.setAttribute("data-callback","setupEnforcement"),o.async=!0,o.defer=!0,t&&o.setAttribute("data-nonce",t),document.body.appendChild(o),o},setupEnforcement(e){window.myEnforcement=e,window.myEnforcement.setConfig({selector:this.selector,mode:this.mode,onReady:()=>{this.$emit("onReady"),window.myEnforcement.run()},onShown:()=>{this.$emit("onShown")},onShow:()=>{this.$emit("onShow")},onSuppress:()=>{this.$emit("onSuppress")},onCompleted:e=>{this.$emit("onCompleted",e.token)},onReset:()=>{this.$emit("onReset")},onHide:()=>{this.$emit("onHide")},onError:e=>{this.$emit("onError",e)},onFailed:e=>{this.$emit("onFailed",e)}})}},mounted(){this.scriptId=`arkose-script-${this.publicKey}`;const e=this.loadScript(this.publicKey,this.nonce);e.onload=()=>{console.log("Arkose API Script loaded"),window.setupEnforcement=this.setupEnforcement.bind(this)},e.onerror=()=>{console.log("Could not load the Arkose API Script!")}},destroyed(){window.myEnforcement&&delete window.myEnforcement,window.setupEnforcement&&delete window.setupEnforcement,this.removeScript()}},s=i,l=o(1),c=(0,l.Z)(s,n,r,!1,null,null,null),u=c.exports},515:function(e,t,o){o.r(t),o.d(t,{default:function(){return d}});var n=function(){var e=this,t=e._self._c;return t("div",[t("h2",[e._v("Token acquisition in progress.")]),t("Arkose",{attrs:{"public-key":e.publicKey,mode:"lightbox"},on:{onCompleted:function(t){return e.onCompleted(t)},onError:function(t){return e.onError(t)},onShown:e.onShown}}),t("div",{attrs:{id:"currentTime"}},[e._v(" "+e._s(e.currentTime)+" ")]),t("div",{attrs:{id:"token"}},[e._v(" "+e._s(e.arkoseToken)+" ")]),t("input",{attrs:{type:"submit",value:"Submit"},on:{click:function(t){return e.onSubmit()}}})],1)},r=[],i=o(721),s={name:"LoginComponent",components:{Arkose:i.Z},data(){return{publicKey:"35536E1E-65B4-4D96-9D97-6ADB7EFF8147",arkoseToken:null,currentTime:null}},methods:{mounted(){console.log("mounted")},onCompleted(e){this.arkoseToken=e;const t=(new Date).getTime(),o=new Date(t).toLocaleString();this.currentTime=o,console.log("currentTime",o),console.log("token",e),this.$http.post("/pushtoken",{token:e}).then((e=>{console.log(e);const t=this.$route.query.delay||3600;console.log("delay",t),setTimeout((()=>{window.location.reload()}),1e3*t)})).catch((e=>{console.log(e);const t=this.$route.query.delay||5;console.log("delay",t),setTimeout((()=>{window.location.reload()}),1e3*t)}))},onError(e){console.log("onError",e),setTimeout((()=>{window.location.reload()}),3e4)},onShown(){},onSubmit(){this.arkoseToken||window.myEnforcement.run()}}},l=s,c=o(1),u=(0,c.Z)(l,n,r,!1,null,null,null),d=u.exports}}]);
//# sourceMappingURL=515.a7f5b9b4.js.map